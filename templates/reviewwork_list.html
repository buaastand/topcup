<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>submit_techwork</title>
    <link rel="stylesheet" href="https://unpkg.com/element-ui/lib/theme-chalk/index.css">
    <link rel="stylesheet" href="../static/css/submit_techwork.css">
    <link rel="stylesheet" href="../static/css/NavName.css">

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://unpkg.com/element-ui/lib/index.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

</head>
<body style="margin: 0">
{% include 'NavMenu.html' %}
<div id="techwork_list" class="background" style="height: 500px; width: 1200px;">

    <el-container>
        <el-header>
            <h1 style="font-weight: bold">
                待评作品列表
            </h1>
        </el-header>

        <el-main>
            <template>
                <el-table :data="techworkList">
                    <el-table-column prop="id" type="index" label="序号"></el-table-column>
                    <el-table-column prop="work_id" label="作品编号"></el-table-column>
                    <el-table-column prop="first_author"  label="第一作者"></el-table-column>
                    <el-table-column prop="title"  label="作品名称"></el-table-column>
                    <el-table-column prop="work_type"  label="比赛类别"></el-table-column>
                    <el-table-column prop="competition"  label="比赛名称"></el-table-column>
                    <el-table-column prop="submitted"  label="作品状态"></el-table-column>
                    <el-table-column>
                        <template slot-scope="scope">
                            <el-button size="mini" type="danger" @click="deleteWork(scope.$index)">浏览</el-button>
                            <el-button size="mini" type="primary" @click="editWork(scope.$index)">评价</el-button>
                        </template>
                    </el-table-column>
                </el-table>
            </template>
        </el-main>
    </el-container>
</div>





</body>

<script>
    {#console.log(JSON.parse( "{{worklist}}")['worklist']);#}
    var app = new Vue({
    el: '#techwork_list',
    data: {
        techworkList: {{ worklist | safe }},
    },
    methods: {
        deleteWork(n) {    // 删除
            if (n == -2) {
                this.techworkList = "";
            }
            {
                this.techworkList.splice(n, 1);
            }
        },
        editWork(n) {    // 删除
            window.location = "/judge_work/?work_id=" + this.techworkList[n].work_id;
        },
    }
})

</script>

</html>